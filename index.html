<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- ANTI-CACHE META TAGS - Mencegah browser caching -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <title>POJOK BKI 4.0</title>
  
  <!-- CSS dengan timestamp anti-cache -->
  <link rel="stylesheet" href="style.css?v=<?php echo time(); ?>" id="main-css">
  
  <!-- Fallback jika PHP tidak tersedia, gunakan timestamp manual -->
  <script>
    // Dynamic CSS loading dengan timestamp
    if (!document.getElementById('main-css').href.includes('?v=')) {
      const timestamp = new Date().getTime();
      document.getElementById('main-css').href = `style.css?v=${timestamp}`;
    }
  </script>
</head>
<body class="light-mode">
  <nav class="main-nav">
    <div class="nav-overlay" id="nav-overlay"></div>

    <div class="nav-content">
      <a href="#" class="logo-link logo-bki-container">
        <img src="assets/bki_logo.png?v=<?php echo time(); ?>" alt="Logo BKI" class="logo-bki">
      </a>

      <!-- FLEXâ€‘GROW CENTER CONTAINER -->
      <div class="menu-container">
        <div class="menu-desktop">
          <a href="#" class="nav-item active" onclick="showHomePage()">DASHBOARD</a>
          <div class="nav-item dropdown">
            <button class="dropdown-btn">
              RESOURCES <span class="arrow">&#9662;</span>
            </button>
            <div class="dropdown-content">
              <a href="https://iacs.org.uk" target="_blank">IACS</a>
              <a href="https://www.tokyo-mou.org/" target="_blank">Tokyo MOU</a>
              <a href="https://www.imo.org/" target="_blank">IMO</a>
              <a href="https://www.bki.co.id/publikasi.html" target="_blank">BKI Publication</a>
            </div>
          </div>
        </div>
      </div>

      <a href="#" class="logo-link logo-bumn-container">
        <img src="assets/bumn_logo.png?v=<?php echo time(); ?>" alt="Logo BUMN" class="logo-bumn">
      </a>
      <button class="hamburger-menu" id="hamburger-btn">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <!-- MOBILE NAV -->
  <div class="mobile-nav-menu" id="mobile-menu">
    <a href="#" class="mobile-nav-item" onclick="showHomePage()">DASHBOARD</a>
    <div class="mobile-nav-item mobile-dropdown">
      <button class="mobile-dropdown-btn" id="mobile-resources-btn">
        RESOURCES <span class="arrow">&#9662;</span>
      </button>
      <div class="mobile-dropdown-content" id="mobile-resources-content">
        <a href="https://iacs.org.uk" target="_blank">IACS</a>
        <a href="https://www.tokyo-mou.org/" target="_blank">Tokyo MOU</a>
        <a href="https://www.imo.org/" target="_blank">IMO</a>
        <a href="https://www.bki.co.id/publikasi.html" target="_blank">BKI Publication</a>
      </div>
    </div>
  </div>

  <div class="container">
    <header>
      <h1>POJOK BKI 4.0</h1>
      <label class="toggle-switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
    </header>
    <main id="app-container"></main>
  </div>

  <!-- Floating Barcode -->
  <div id="floating-barcode">
    <p>Scan Me!</p>
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=https://bki.co.id" alt="QR Code" id="barcode-image">
  </div>

  <!-- JavaScript dengan dynamic loading dan anti-cache -->
  <script>
    // Function untuk load script dengan timestamp
    function loadScriptWithTimestamp(src, callback) {
      const timestamp = new Date().getTime();
      const script = document.createElement('script');
      script.src = `${src}?v=${timestamp}`;
      script.onload = callback || function() {};
      script.onerror = function() {
        console.error('Failed to load script:', src);
      };
      document.head.appendChild(script);
    }

    // Load script.js dengan anti-cache
    loadScriptWithTimestamp('script.js', function() {
      console.log('Script loaded successfully with timestamp');
    });

    // Force reload function untuk debugging
    window.forceReload = function() {
      // Clear semua cache
      if ('caches' in window) {
        caches.keys().then(function(names) {
          names.forEach(function(name) {
            caches.delete(name);
          });
        });
      }
      // Reload dengan parameter random
      window.location.href = window.location.href + '?t=' + new Date().getTime();
    };
  </script>

  <!-- Fallback loading jika script gagal -->
  <noscript>
    <script src="script.js"></script>
  </noscript>
</body>
</html>